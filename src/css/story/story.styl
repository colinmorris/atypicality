/* TODO: mobile scrolly styles
cf. song-repetition/src/css/story/scrolly-columns.styl
*/

$debug-scroll = false

/**
 Overall layout of story thing:
   div#story
    div.sticky-wrapper (sticky graphic element, see sticky-song.js and sticky.styl)
      // the wrapper thing was so that it could be flex laid out while the child
      // .sticky div was absolute/fixed, though switched to scrollmagic.setPin, so
      // no longer necessary
      div.sticky
    div.prose.scrolltext
      a bunch of <p>, <div>, .step, etc. elements
    div.right-spacer

 This module deals with #story, the arrangement of sticky and prose wrt the parent,
 and styling the contents of .scrolltext.
 The contents of .sticky are styled in sticky.styl.
 **/
#story
  width: 100%
  // laid out normally then repositioned *relative to itself*
  position: relative
  display flex
  flex-direction row
  justify-content space-around

#story .right-spacer
  order 3
  flex .5 1 1rem
  min-width .5rem

#story .scrolltext
  //position: relative
  flex 1 1 30rem
  order 2
  min-width 10rem
  max-width: 40rem

  h3
    text-align center
    $fs = 2.7rem
    font-size $fs
    letter-spacing .05em
    // ridiculous
    $flourish = "âˆ¿"
    &::before, &::after
      content $flourish
      font-size $fs * .6
      padding $fs * .05
      display inline-block
      $dy = -($fs * .13)
      transform s('translate(0, %s)', $dy)

  code
    font-family monospace

  $p = 160px
  .step
    background lighten(#f3f3f3, 30%)
    background-clip content-box
    opacity .5
    &.active
      opacity 1
    &.post-active
      opacity .8
    transition opacity .5s
    padding-top ($p / 4)
    padding-bottom $p
    $m = 0px
    margin-top $m
    margin-bottom $m
    if $debug-scroll
      &.active
        background-color rgba(66, 255, 2, .05)
    for n in 1 2 3 4 5
      .pad-bottom-{n}
        padding-bottom $p * n
      &.unpad-bottom-{n}
        padding-bottom ($p / n)

  // Assumed to be 'wrappers' containing inner step <p>s
  div.step
    padding-bottom 0
    &:last-child
      padding-bottom $p

