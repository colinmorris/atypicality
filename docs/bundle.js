!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=d3.scaleLinear().domain([.5,1]).range(["#ff00c7","#000"]).interpolate(d3.interpolateLab);e.typicality_cmap=r,e.contrast_color="red"},function(t,e,n){"use strict";function r(){return new Promise(function(t,n){d3.csv("assets/number_ones.csv",i.Song.fromRow,function(n){e.db=a=n,t()})})}function o(t){var e=a.filter(function(e){return e.track==t});return console.assert(1==e.length,"Ambiguous/Unknown track "+t),e[0]}Object.defineProperty(e,"__esModule",{value:!0}),e.lookup=e.db=e.load=void 0;var i=n(6),a=void 0;e.load=r,e.db=a,e.lookup=o},function(t,e,n){"use strict";function r(t){return"[object Array]"===Object.prototype.toString.call(t)}t.exports=Array.isArray||r},function(t,e,n){"use strict";function r(t){return"function"==typeof t}t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.RadarChart=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),s=["energy","liveness","speechiness","acousticness","instrumentalness","valence","danceability","tempo"],c={acousticness:"The likelihood that this song was recorded solely by acoustic means (as opposed to more electronic means)",danceability:"How suitable is this track for dancing? Includes tempo, regularity of beat, and beat strength",energy:"A perceptual measure of intensity throughout the track. Think fast, loud and noisy (e.g. hard rock) more than dance tracks.",instrumentalness:"The likelihood that this track is predominantly instrumental. Not necessarily the inverse of speechiness.",liveness:"Detects the presence of a live audience during the recording. Heavily studio-produced tracks score low on this measure.",speechiness:"Detects the presence of spoken word throughout the track. Sung vocals are not considered spoken word.",tempo:"The overall average tempo of the track (i.e. bpm)",valence:"The musical positiveness of the track."},u=s.map(function(t){return"mean_"+t}),l=function(){function t(e){var n=this;r(this,t),this.root=e,this.cfg={marker_radius:5,base_color:"cyan"};var o=this.root.attr("width"),i=this.root.attr("height");this.origin={x:o/2,y:i/2};var a=.45*Math.min(o,i);this.scales=s.map(function(t,e){return d3.scaleLinear().domain([0,1]).range([[n.origin.x,n.origin.y],[n.origin.x+a*Math.cos(2*e*Math.PI/s.length),n.origin.y+a*Math.sin(2*e*Math.PI/s.length)]])}),this.songMap=new Map,this.root.append("circle").attr("cx",this.origin.x).attr("cy",this.origin.y).attr("r",this.cfg.marker_radius).attr("fill","black");var u=this.root.selectAll(".axis").data(this.scales).enter().append("g").classed("axis",!0);u.append("line").attr("x1",function(t){return t.range()[0][0]}).attr("x2",function(t){return t.range()[1][0]}).attr("y1",function(t){return t.range()[0][1]}).attr("y2",function(t){return t.range()[1][1]}).attr("stroke-width",.5).attr("stroke","black"),u.append("text").attr("x",function(t){return t.range()[1][0]}).attr("y",function(t){return t.range()[1][1]}).text(function(t,e){return s[e]}).attr("font-size",12).append("title").text(function(t,e){return c[s[e]]})}return o(t,[{key:"pointsForSong",value:function(t){var e=this;return t.getAttrs(s).map(function(t,n){return e.scales[n](t)})}},{key:"plotPoints",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.fill_opacity||.2,i=Math.min(.9,3*o);t.selectAll("circle").data(e).enter().append("circle").classed("marker",!0).attr("r",void 0==r.radius?this.cfg.marker_radius:r.radius).attr("fill",n).attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("fill-opacity",.5),t.append("polygon").attr("points",e.join(",")).attr("fill",n).attr("fill-opacity",o).on("mouseover",function(t,e,n){d3.select(n[e]).attr("fill-opacity",i)}).on("mouseout",function(t,e,n){d3.select(n[e]).attr("fill-opacity",o)})}},{key:"plotSong",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.dedupe_key;if(this.songMap.has(r))return void console.warn("Tried to plot song but key "+r+" already present. Ignoring.");var o=this.root.append("g");this.songMap.set(r,o);var i=this.pointsForSong(t);if(this.plotPoints(o,i,this.cfg.base_color),n){var a=o.append("g").classed("baseline","true"),s=t.getAttrs(u),c=s.map(function(t,n){return e.scales[n](t)});this.plotPoints(a,c,"#999",{radius:0,fill_opacity:.2})}return o}},{key:"clear",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,o=this.songMap.keys()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;this.dropSong(i)}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}}},{key:"dropSong",value:function(t){var e=void 0;e="string"==typeof t?t:t.dedupe_key;var n=this.songMap.get(e);void 0==n&&console.warn("Tried to delete song with key "+e+" but wasn't present"),n.remove(),this.songMap.delete(e)}},{key:"contrast",value:function(t){var e=this.plotSong(t,!1);void 0!=e&&e.selectAll("*").attr("fill",a.contrast_color)}},{key:"setSong",value:function(t){this.clear(),this.plotSong(t)}}]),t}();e.RadarChart=l},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.BasicSongChart=e.SongChart=void 0;var s=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(4),l=n(0),f=r(l),d=n(1),h=r(d),p=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];a(this,t),this.root=e,this.song=n,this.show_year=r,this.heading=this.root.append("div").classed("heading",!0).classed("tk-atlas",!0).classed("prose__hed",!0);var i=this.heading.append("h3");o&&(i=i.append("mark")),i.classed("main",!0);var s=Math.min(this.root.node().offsetWidth,.8*window.innerHeight);this.svg=this.root.append("svg").classed("radar",!0).attr("width",s).attr("height",s),this.radar=new u.RadarChart(this.svg),this.meta_tray=this.root.append("div"),this.setSong(this.song)}return c(t,[{key:"onResize",value:function(){return}},{key:"setSong",value:function(t){this.song=t,this.updateHeading(),this.radar.setSong(this.song),this.updateTray()}},{key:"updateTray",value:function(){this.meta_tray.text("");var t=["mode","key","time_signature"],e=!0,n=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value,s=a+": "+this.song[a];this.meta_tray.append("span").classed("meta_factoid",!0).text(s)}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}},{key:"updateHeading",value:function(){var t=this.song.artist+" - "+this.song.track+" ("+(100*this.song.typicality).toPrecision(3)+"% typical)";this.show_year&&(t=this.song.Year+": "+t),this.heading.select(".main").text(t)}}],[{key:"for_placeholder",value:function(e){var n=h.lookup(e.dataset.track),r=e.dataset.show_year;return new t(d3.select(e),n,r,!0)}}]),t}(),g=function(t){function e(){var t;a(this,e);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(r)));return s.heading.append("h4").classed("contrast",!0).style("color",f.contrast_color),s}return i(e,t),c(e,[{key:"setSong",value:function(t){this.contrast=void 0,this.sticky=!1,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setSong",this).call(this,t)}},{key:"updateHeading",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateHeading",this).call(this);var t=this.heading.select(".contrast");if(this.contrast){t.style("opacity",1);var n=100*this.song.similarity(this.contrast),r=" vs. "+this.contrast.artist+" - "+this.contrast.track+" ("+n.toPrecision(3)+"% similar)";t.text(r)}else t.text("|"),t.style("opacity",0)}},{key:"contrastSong",value:function(t){this.contrast&&(console.log("Clearing existing contrast song."),this.decontrastSong(!0)),this.contrast=t,this.updateHeading(),this.radar.contrast(t)}},{key:"decontrastSong",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!this.contrast||this.sticky&&!t||(this.radar.dropSong(this.contrast),this.contrast=void 0,this.updateHeading())}},{key:"setSticky",value:function(){this.sticky=!0}}]),e}(p);e.SongChart=g,e.BasicSongChart=p},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Song=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(13),a=function(t){return t&&t.__esModule?t:{default:t}}(i),s=["energy","liveness","speechiness","acousticness","instrumentalness","valence","danceability","tempo"],c=s.map(function(t){return"mean_"+t}),u=["peak","wksonchart","typicality"].concat(s).concat(c),l=function(){function t(){r(this,t)}return o(t,[{key:"getAttrs",value:function(t){var e=[],n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,c=this[s];e.push(c)}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return e}},{key:"sonic_vector",value:function(){return this.getAttrs(s)}},{key:"similarity",value:function(t){var e=this.sonic_vector(),n=t.sonic_vector();return(0,a.default)(e,n)}},{key:"decade",get:function(){return this.Year-this.Year%10}},{key:"dedupe_key",get:function(){return this.track}}],[{key:"fromRow",value:function(e){var n=new t;n.Year=+e.Year;var r=!0,o=!1,i=void 0;try{for(var a,s=u[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;n[c]=+e[c]}}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n.artist=e.artist,n.track=e.track,n.mode=e.mode,n.key=e.key,n.time_signature=e.time_signature,n}}]),t}();e.Song=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){var t=h.node().offsetWidth;p!==t&&(p=t,l.default.resize())}var i=n(8),a=r(i),s=n(10),c=r(s),u=n(11),l=r(u),f=n(1),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(f),h=d3.select("body"),p=0;!function(){h.classed("is-mobile",c.default.any()),window.addEventListener("resize",(0,a.default)(o,150)),d.load().then(function(){return l.default.init()})}()},function(t,e,n){(function(e){function n(t,e,n){function o(e){var n=g,r=y;return g=y=void 0,x=e,m=t.apply(r,n)}function i(t){return x=t,b=setTimeout(l,e),O?o(t):m}function c(t){var n=t-S,r=t-x,o=e-n;return M?w(o,v-r):o}function u(t){var n=t-S,r=t-x;return void 0===S||n>=e||n<0||M&&r>=v}function l(){var t=_();if(u(t))return f(t);b=setTimeout(l,c(t))}function f(t){return b=void 0,j&&g?o(t):(g=y=void 0,m)}function d(){void 0!==b&&clearTimeout(b),x=0,g=S=y=b=void 0}function h(){return void 0===b?m:f(_())}function p(){var t=_(),n=u(t);if(g=arguments,y=this,S=t,n){if(void 0===b)return i(S);if(M)return b=setTimeout(l,e),o(S)}return void 0===b&&(b=setTimeout(l,e)),m}var g,y,v,m,b,S,x=0,O=!1,M=!1,j=!0;if("function"!=typeof t)throw new TypeError(s);return e=a(e)||0,r(n)&&(O=!!n.leading,M="maxWait"in n,v=M?k(a(n.maxWait)||0,e):v,j="trailing"in n?!!n.trailing:j),p.cancel=d,p.flush=h,p}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function o(t){return!!t&&"object"==typeof t}function i(t){return"symbol"==typeof t||o(t)&&b.call(t)==u}function a(t){if("number"==typeof t)return t;if(i(t))return c;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(l,"");var n=d.test(t);return n||h.test(t)?p(t.slice(2),n?2:8):f.test(t)?c:+t}var s="Expected a function",c=NaN,u="[object Symbol]",l=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,h=/^0o[0-7]+$/i,p=parseInt,g="object"==typeof e&&e&&e.Object===Object&&e,y="object"==typeof self&&self&&self.Object===Object&&self,v=g||y||Function("return this")(),m=Object.prototype,b=m.toString,k=Math.max,w=Math.min,_=function(){return v.Date.now()};t.exports=n}).call(e,n(9))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}};e.default=r},function(t,e,n){"use strict";function r(){console.log("got a resize"),this.explorer.onResize()}function o(){console.log("Make something awesome!"),this.explorer=a.default.init(),d3.selectAll(".songchart").each(function(t,e,n){s.BasicSongChart.for_placeholder(n[e])})}Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),a=function(t){return t&&t.__esModule?t:{default:t}}(i),s=n(5),c={};r=r.bind(c),o=o.bind(c),e.default={init:o,resize:r}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){for(var e=[],n=0;n<10;n++){var r=t+n;r>=l&&r<=f&&e.push(t+n)}return e}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=(n(4),n(5)),s=(n(6),n(0)),c=n(1),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(c),l=1958,f=2016,d=[1950,1960,1970,1980,1990,2e3,2010],h=function(){function t(){r(this,t),this.songdat=u.db;this.root=d3.select("#song-explorer"),this.margin={top:20,right:20,bottom:50,left:20},this.song=this.songdat[50],this.decade=this.song.decade,console.log(this.decade),this.year=this.song.Year,this.setupControls(),this.songView=this.root.append("div").classed("song-view",!0),this.songChart=new a.SongChart(this.songView,this.song),this.moreSongs=this.root.append("div");var e=this.moreSongs.append("div").classed("moreby",!0).classed("picker",!0).style("display","none");e.append("span").classed("label",!0),e.append("span").classed("songs",!0),this.moreby=e;var n=this.moreSongs.append("div").classed("simsongs",!0).classed("picker",!0);n.append("span").classed("label",!0).text("Similar songs: "),n.append("span").classed("songs",!0);var o=this.moreSongs.append("div").classed("simsongs-future",!0).classed("picker",!0);o.append("span").classed("label",!0).text("Similar songs (future): "),o.append("span").classed("songs",!0),this.selectSong(this.song)}return i(t,[{key:"onResize",value:function(){this.songChart.onResize()}},{key:"setupControls",value:function(){var t=this,e=this.root.append("div").classed("picker",!0);e.append("div").classed("decade-picker",!0).selectAll(".decade-selector").data(d).enter().append("a").classed("decade-selector",!0).classed("active",function(e){return e==t.decade}).text(function(t){return t+"s"}).on("click",function(e){return t.setDecade(e)}),this.year_picker=e.append("div").classed("year-picker",!0),this.updateYears(),this.song_picker=e.append("div").classed("song-picker",!0),this.updateSongs()}},{key:"setDecade",value:function(t){var e=this;t!=this.decade&&(this.decade=t,this.root.selectAll(".decade-selector").classed("active",function(t){return t==e.decade}),this.year=Math.min(f,Math.max(l,this.decade)),this.updateYears(),this.updateSongs())}},{key:"updateYears",value:function(){var t=this,e=o(this.decade),n=this.year_picker.selectAll(".year-selector").data(e);n.exit().remove();var r=n.enter().append("a").classed("year-selector",!0);n.merge(r).text(function(t){return t}).on("click",function(e){return t.setYear(e)}).classed("active",function(e){return e==t.year})}},{key:"setYear",value:function(t){var e=this;console.log("Setting year to ",t),this.year=t,this.year_picker.selectAll(".year-selector").classed("active",function(t){return t==e.year}),this.updateSongs()}},{key:"updateSongs",value:function(){var t=this,e=this.songdat.filter(function(e){return e.Year==t.year}),n=this.song_picker.selectAll(".song-selector").data(e,function(t){return t.track});n.exit().remove();var r=n.enter().append("a").classed("song-selector",!0);n.merge(r).text(function(t){return t.track}).style("color",function(t){return(0,s.typicality_cmap)(t.typicality)}).on("click",function(e){return t.selectSong(e)}).on("mouseover",function(e){return t.contrastSong(e)}).on("mouseout",function(e){return t.decontrastSong()}).on("contextmenu",function(e){return t.songChart.setSticky()}).classed("active",function(e){return e==t.song})}},{key:"populateSongs",value:function(t,e){var n=this,r=t.selectAll(".song-selector").data(e);r.exit().remove();var o=r.enter().append("a").classed("song-selector",!0);r.merge(o).text(function(t){return t.track}).style("color",function(t){return(0,s.typicality_cmap)(t.typicality)}).on("click",function(t){return n.selectSong(t)}).on("mouseover",function(t){return n.contrastSong(t)}).on("mouseout",function(t){return n.decontrastSong()}).on("contextmenu",function(t){return n.songChart.setSticky()}).classed("active",function(t){return t==n.song})}},{key:"selectSong",value:function(t){var e=this;console.log("Setting song to "+t.track),this.song=t,this.song_picker.selectAll(".song-selector").classed("active",function(t){return t==e.song}),this.songChart.setSong(this.song),this.updateMoreSongs()}},{key:"updateMoreSongs",value:function(){var t=this,e=this.songdat.filter(function(e){return e.artist==t.song.artist&&e.track!=t.song.track});0==e.length?this.moreby.style("display","none"):(this.moreby.style("display","initial"),this.moreby.select(".label").text("More by "+this.song.artist+": "),this.populateSongs(this.moreby.select(".songs"),e));var n=this.songdat.filter(function(e){return t.song.Year-e.Year>=0&&t.song.Year-e.Year<8&&e.track!=t.song.track});n.sort(function(e,n){return d3.descending(t.song.similarity(e),t.song.similarity(n))}),n=n.slice(0,10),this.populateSongs(this.moreSongs.select(".simsongs .songs"),n),n=this.songdat.filter(function(e){return t.song.Year-e.Year<0&&t.song.Year-e.Year>-8&&e.track!=t.song.track}),n.sort(function(e,n){return d3.descending(t.song.similarity(e),t.song.similarity(n))}),n=n.slice(0,10),this.populateSongs(this.moreSongs.select(".simsongs-future .songs"),n)}},{key:"contrastSong",value:function(t){t!=this.song&&this.songChart.contrastSong(t)}},{key:"decontrastSong",value:function(){this.songChart.decontrastSong()}}],[{key:"init",value:function(){return new t}}]),t}();e.default=h},function(t,e,n){"use strict";function r(t,e){return function(n,r){return t(n,r,e)}}function o(t,e,n){var o,u,l;if(!s(t))throw new TypeError("cosine-similarity()::invalid input argument. First argument must be an array. Value: `"+t+"`.");if(!s(e))throw new TypeError("cosine-similarity()::invalid input argument. Second argument must be an array. Value: `"+e+"`.");if(arguments.length>2&&!c(n))throw new TypeError("cosine-similarity()::invalid input argument. Accessor must be a function. Value: `"+n+"`.");if(t.length!==e.length)throw new Error("cosine-similarity()::invalid input argument. Input arrays must have the same length.");return t.length?(n?(o=i(t,e,n),u=a(t,r(n,0)),l=a(e,r(n,1))):(o=i(t,e),u=a(t),l=a(e)),o/(u*l)):null}var i=n(14),a=n(15),s=n(2),c=n(3);t.exports=o},function(t,e,n){"use strict";function r(t,e,n){if(!o(t))throw new TypeError("dot()::invalid input argument. First argument must be an array. Value: `"+t+"`.");if(!o(e))throw new TypeError("dot()::invalid input argument. Second argument must be an array. Value: `"+e+"`.");if(arguments.length>2&&!i(n))throw new TypeError("dot()::invalid input argument. Accessor must be a function. Value: `"+n+"`.");var r,a=t.length,s=0;if(a!==e.length)throw new Error("dot()::invalid input argument. Arrays must be of equal length.");if(!a)return null;if(n)for(r=0;r<a;r++)s+=n(t[r],r,0)*n(e[r],r,1);else for(r=0;r<a;r++)s+=t[r]*e[r];return s}var o=n(2),i=n(3);t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!o(t))throw new TypeError("l2norm()::invalid input argument. Must provide an array.  Value: `"+t+"`.");if(arguments.length>1&&!i(e))throw new TypeError("l2norm()::invalid input argument. Accessor must be a function. Value: `"+e+"`.");var n,r,a,s,c=t.length,u=0,l=1;if(!c)return null;if(e)for(s=0;s<c;s++)r=e(t[s],s),(a=r<0?-r:r)>0&&(a>u?(n=u/r,l=1+l*n*n,u=a):(n=r/u,l+=n*n));else for(s=0;s<c;s++)r=t[s],(a=r<0?-r:r)>0&&(a>u?(n=u/r,l=1+l*n*n,u=a):(n=r/u,l+=n*n));return u*Math.sqrt(l)}var o=n(2),i=n(3);t.exports=r}]);